<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Buckeye IT Client Login</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">

  <!-- Auth Check Script -->
  <script>
    async function checkAuth() {
      try {
        const res = await fetch('/.auth/me');
        const data = await res.json();
        const clientPrincipal = data.clientPrincipal;

        if (clientPrincipal && clientPrincipal.userDetails) {
          window.location.href = "/index.html";
        }
      } catch (error) {
        console.error("Auth check failed:", error);
      }
    }
    checkAuth();
  </script>

  <div class="flex bg-white shadow-xl rounded-xl overflow-hidden max-w-5xl w-full">
    <!-- Login Form -->
    <div class="w-full md:w-1/2 p-10 space-y-6">
      <h1 class="text-3xl font-bold text-red-700">Login</h1>
      <p class="text-gray-600 text-sm">Don't have an account yet? <a href="#" class="text-red-600 hover:underline">Sign Up</a></p>

      <!-- Microsoft Sign-In -->
      <a href="/.auth/login/aad" class="w-full inline-flex items-center justify-center px-4 py-3 text-white bg-red-700 hover:bg-red-800 rounded-lg font-medium transition">
        Sign in with Microsoft
      </a>

      <!-- Divider -->
      <div class="flex items-center justify-between my-4">
        <hr class="w-full border-gray-300">
        <span class="px-2 text-sm text-gray-400">OR</span>
        <hr class="w-full border-gray-300">
      </div>

      <!-- External Sign-In -->
      <a href="https://buckeyeclientauth.ciamlogin.com/89f6ba91-5e7f-45da-8804-b0c4cfbcec4b/oauth2/v2.0/authorize?p=B2C_1A_signup_signin&client_id=462b1d1c-20f3-41fe-8bdb-3ac78a4cd95a&nonce=defaultNonce&redirect_uri=https%3A%2F%2Fportal.buckeyeit.com%2F.auth%2Flogin%2Faad%2Fcallback&scope=openid&response_type=id_token&prompt=login"
         class="w-full inline-flex items-center justify-center px-4 py-3 text-white bg-gray-700 hover:bg-gray-800 rounded-lg font-medium transition">
        Sign in / Sign up with Email
      </a>

      <p class="text-sm text-gray-500 mt-6 text-center">
        Need help? <a href="mailto:support@buckeyeit.com" class="text-red-600 hover:underline">Contact Support</a>
      </p>
    </div>

    <!-- Illustration Panel -->
    <div class="hidden md:block w-1/2 bg-gray-100 p-8 flex items-center justify-center">
      <img src="https://undraw.co/api/illustrations/5c7689b7-186d-40d3-8a4b-7c86f4a2a901" alt="Login Illustration" class="max-h-[300px] object-contain">
    </div>
  </div>

</body>
</html>
